# Java
## 예외처리

### 예외처리
#### 프로그램의 오류(에러)
- 어떤 원인에 의해 오동작하거나 비정상적으로 종료되는 경우
 #### 발생 시점에 따른 구분
 - 컴파일 에러: 컴파일 도중 컴파일러가 발견하는 오류
 - 런타임 에러: 컴파일은 성공적으로 진행되었으나, 프로그램 실행 중에 발생하는 오류
 - 논리적 에러: 컴파일도 되고 프로그램도 실행되었으나, 프로그램이 의도대로 동작하지 않는 오류 (결과가 예상과 다른 경우)

 #### 에러와 예외
 - 에러: 발생하면 복구할 수 없는 심각한 오류
 - 예외: 프롤그래머가 적절한 코드를 통해 대비할 수 있는 오류

 #### 예외처리
 - 예외 발생 시 프로그램의 비 정상 종료를 막고 정상적인 실행 상태를 유지하는 것
 - 예외의 감지 및 예외 발생 시 동작할 코드를 작성하고, 사용자에게 적잘한 메시지 제공

 #### 예외의 계열
 - RuntimeException 클래스들
    - 프로그래머의 실수로 발생하는 계열
    - unchecked exception
    - 대처 코드가 없어도 컴파일 문제 x

- Exception 클래스들
    - 사용자의 실수 등 외적인 요인에 의해 발생하는 계열
    - checked exception
    - 대처 코드가 없으면 컴파일 진행 x

#### 예외 처리 키워드
- 직접 처리
    - try{}: 예외가 발생할 가능성이 있는 코드를 포함하는 블록
    - cartch (예매개변수) {}: 예외가 발생했을 때 실행할 코드 블록
    - finally{}: 예외 발생 여부와 상관없이 항상 실행되는 코드 블록
- 간접 처리
    - throws: 메서드 선언부에 사용되며, 메서드에서 발생 가능한 예외를 호출자에게 전달
- 예외를 직접 발생시킬 때
    - throw: 예외를 명시적으로 발생시키는 키워드

#### 예외처리 (try ~ catch 구문)
```java
try {
    // (1) 예외가 발생할 수 있는 코드
    // (2) 정상 코드
} catch (SomeException e) {
    // (3) 예외가 발생했을 때 처리할 코드
}
// (4) 일반 코드

// 예외가 발생할 때: 1 -> 3 -> 4
// 예외가 발생하지 않을 때: 1 -> 2 -> 4
```

#### 다중 예외처리
- try 블록에서 여러 종류의 예외가 발생할 경우
- 하나의 try 블록에 여러 개의 catch 블록 추가 가능

#### 다중 예외처리 유의사항
- 예외 객체에 해당하는 catch 문장을 찾을 떄는 다형성이 적용됨
- 상위 타입의 예외가 먼저 선언되는 경우 뒤에 등장하는 catch 블록은 동작할 기회가 없음
- 상속 관계가 없는 경우는 무관
- 상속 관계에서는 작은 범위에서 큰 범위 순으로 정의

#### Exception 인스턴스의 주요 메서드
- getMessage(): 발생된 예외에 대한 구체적인 메시지를 반환
- pringStackTrace(): 예외 발생 당시의 호출 스택을 출력

#### 메서드에서 예외 던지기
- 메서드 선언부에 throws 키워드를 사용하여 예외 작성
- 예외가 여러 개일 경우 , 를 이용하여 나열
- 메서드가 예외를 처리하는 것이 아닌 전달
- 조상 타입의 예외로 처리 가능

#### finally 구문
- finally는 예외 발생 여부와 상관없이 언제나 실행
- 예외 발생 시 -> try - catch - finally
- 예외 미발생 시 -> try - finally
- 중간에 return이 있어도 finally 블록 수행 후 반환

#### 자동 자원 반납 구문
- 자원 등을 반납할 떄 finally에서 close()를 통해 반납을 주로 함
- 코드가 지저분해지고 다른 예외 상황을 발생시킬 수 있음
- try() -> 괄호 안에 객체를 생성하는 코드를 작성하면 해당 객체는 close()를 호출하지 않아도 불록을 벗어나는 순간 close()가 호출됨
- 해당 객체의 클랮스가 AutoCloseable이라는 인터페이스를 구현해야 함

#### 사용자 정의 예외
- 기존에 정의된 예외 이외에 사용자가 직접 정의 예외를 작성할 수 있음
- 대부분 Excption 또는 RuntimeException 클래스를 상속받아 작성
    - checked exception활용: 명시적 예외 처리 또는 throws 필요
    - runtime exception 활용: 묵시적 예외 처리 가능 (but 큰일날 수도 있음)